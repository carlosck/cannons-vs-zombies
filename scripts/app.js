var App;App={init:function(){return this.$stage=null,this.$world=null,this.$yard=null,this.$game_over_alert=null,this.$continue_btn=null,this.$score_container=null,this.game=!1,this.score=0,this.$ball_1=null,this.$ball_2=null,this.$ball_3=null,this.$ball_4=null,this.$ball_5=null,this.$cannon_1=null,this.$cannon_2=null,this.$cannon_3=null,this.$cannon_4=null,this.$cannon_5=null,this.humans=new Array,this.projectiles=new Array,this.div_count=0,this.projectile_count=0,this.projectiles_to_remove=new Array,this.humans_to_remove=new Array,this.enemy_thread=null,this.bind()},bind:function(){return this.$stage=this.by_id("stage"),this.$world=this.by_id("world"),this.$yard=this.by_id("yard"),this.$game_over_alert=this.by_id("game_over"),this.$continue_btn=this.by_id("continue"),this.$score_container=this.by_id("score"),this.$ball_1=this.by_id("ball_1"),this.$ball_2=this.by_id("ball_2"),this.$ball_3=this.by_id("ball_3"),this.$cannon_1=this.by_id("cannon_1"),this.$cannon_2=this.by_id("cannon_2"),this.$cannon_3=this.by_id("cannon_3"),this.$cannon_4=this.by_id("cannon_4"),this.$cannon_5=this.by_id("cannon_5"),this.set_on(document,"keydown",App.key_down),this.set_on(document,"keyup",App.key_up),this.set_on(App.$continue_btn,"click",App.restart),this.set_on(App.$ball_1,"dragstart",App.drag_start),this.set_on(App.$ball_2,"dragstart",App.drag_start),this.set_on(App.$ball_3,"dragstart",App.drag_start),this.set_on(App.$cannon_1,"drop",App.drop),this.set_on(App.$cannon_2,"drop",App.drop),this.set_on(App.$cannon_3,"drop",App.drop),this.set_on(App.$cannon_4,"drop",App.drop),this.set_on(App.$cannon_5,"drop",App.drop),this.set_on(App.$cannon_1,"dragover",App.drag_over),this.set_on(App.$cannon_2,"dragover",App.drag_over),this.set_on(App.$cannon_3,"dragover",App.drag_over),this.set_on(App.$cannon_4,"dragover",App.drag_over),this.set_on(App.$cannon_5,"dragover",App.drag_over),this.set_on(App.$cannon_1,"dragleave",App.drag_leave),this.set_on(App.$cannon_2,"dragleave",App.drag_leave),this.set_on(App.$cannon_3,"dragleave",App.drag_leave),this.set_on(App.$cannon_4,"dragleave",App.drag_leave),this.set_on(App.$cannon_5,"dragleave",App.drag_leave),this.start()},drag_start:function(e){return e.dataTransfer.setData("ballid",e.target.id)},drop:function(e){var t,n;return t=e.dataTransfer.getData("ballid"),n=e.target,App.shoot(n.id.replace("cannon_",""),t),App.remove_class(n,"selected")},drag_over:function(e){return e.preventDefault(),e.stopPropagation(),App.has_class(e.target,"selected")?void 0:App.add_class(e.target,"selected")},drag_leave:function(e){return e.preventDefault(),App.remove_class(e.target,"selected")},start:function(){return this.score=0,this.$yard.innerHTML="",this.game=!0,this.humans=new Array,this.projectiles=new Array,this.div_count=0,this.projectile_count=0,this.projectiles_to_remove=new Array,this.humans_to_remove=new Array,this.enemy_thread=null,App.make_an_enemy(),this.enemy_thread=setInterval(function(){return App.make_an_enemy()},3e3),App.main_loop()},main_loop:function(){var e,t,n,a,o,p,r,i,s,l;for(App.projectiles_to_remove=new Array,App.humans_to_remove=new Array,s=App.humans,a=o=0,r=s.length;r>o;a=++o)if(e=s[a],e.update(),App.css(e.body,{left:e.left+"px"}),App.css(e.body,{top:e.top+"px"}),e.left<10){this.game_over();break}for(l=App.projectiles,t=p=0,i=l.length;i>p;t=++p)n=l[t],n.update(),n.left>800?(n.destroy(),App.projectiles_to_remove.push(t)):(App.css(n.body,{left:n.left+"px"}),App.css(n.body,{top:n.top+"px"}));return App.check_collitions(),this.$score_container.innerHTML=this.score,App.garbage_collection()},check_collitions:function(){var e,t,n,a,o,p,r,i,s,l,_,h;for(_=App.projectiles,h=[],o=s=0,l=_.length;l>s;o=++s)p=_[o],r=p.body,i=r.getBoundingClientRect(),h.push(function(){var r,s,l,_;for(l=App.humans,_=[],e=r=0,s=l.length;s>r;e=++r){if(t=l[e],n=t.body,a=n.getBoundingClientRect(),i.left<a.right&a.left<i.right&i.top<a.bottom&a.top<i.bottom){t.hit(p.damage),App.projectiles_to_remove.push(o),p.explode(),t.hp<=0&&(App.score+=t.points,App.humans_to_remove.push(e));break}_.push(void 0)}return _}());return h},garbage_collection:function(){var e,t;for(e=0;e<App.projectiles_to_remove.length;)App.projectiles.splice(App.projectiles_to_remove[e],1),e++;for(t=0;t<App.humans_to_remove.length;)App.humans.splice(App.humans_to_remove[t],1),t++;return this.game?setTimeout(function(){return App.main_loop()},150):void 0},make_an_enemy:function(){var e,t,n,a;return e=document.createElement("div"),n=Math.floor(21*Math.random()),10>=n?(e.className="human zombie1",e.id="enemy"+App.div_count,e.innerHTML="<div class='healt_bar'></div>",this.$yard.appendChild(e),a=Math.floor(5*Math.random()),t=new App.zombie_fast(e,a)):n>10&&19>=n?(e.className="human zombie2",e.id="enemy"+App.div_count,e.innerHTML="<div class='healt_bar'></div>",this.$yard.appendChild(e),a=Math.floor(5*Math.random()),t=new App.zombie_heavy(e,a)):(e.className="human neighbor",e.id="enemy"+App.div_count,e.innerHTML="<div class='healt_bar'></div>",this.$yard.appendChild(e),t=new App.neighbor(100,e,10,300)),App.div_count++,t.start_walking(),this.humans.push(t)},game_over:function(){return this.game=!1,clearTimeout(this.enemy_thread),this.css(App.$game_over_alert,{opacity:"0",display:"block"}),new this.animate(App.$game_over_alert,{opacity:"1"},{duration:1e3})},shoot:function(e,t){var n,a;switch(a=document.createElement("div"),a.className="projectile",a.id="projectile"+App.projectile_count,a.innerHTML="<div class='ball "+t+"'></div>",this.$yard.appendChild(a),t){case"ball_1":n=new App.cannonball_fast(a,e-1);break;case"ball_2":n=new App.cannonball_medium(a,e-1);break;case"ball_3":n=new App.cannonball_heavy(a,e-1)}return App.projectile_count++,n.shoot(),this.projectiles.push(n)},restart:function(e){return App.prevent_default(e),new App.animate(App.$game_over_alert,{opacity:"0"},{duration:500,callback:function(){return App.css(App.$game_over_alert,{opacity:"0",display:"none"}),App.start()}}),console.log("restart")}},document.addEventListener("DOMContentLoaded",function(){return App.init()});
//# sourceMappingURL=./app.map